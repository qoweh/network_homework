# Docker Compose for Network Chat Application
# Easy deployment with docker-compose up

version: '3.8'

services:
  network-chat:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: network-chat-app
    image: network-chat:latest
    environment:
      - APP_MODE=demo
      - JAVA_OPTS=--enable-preview
    volumes:
      # Mount local directory for received files
      - ./received_files:/app/received_files
    ports:
      - "5000:5000"
    networks:
      - chat-network
    restart: unless-stopped

  # Test runner service
  network-chat-test:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: network-chat-test
    image: network-chat:latest
    environment:
      - APP_MODE=test
    profiles:
      - test
    networks:
      - chat-network

networks:
  chat-network:
    driver: bridge
    ipam:
      config:
        - subnet: 172.28.0.0/16
